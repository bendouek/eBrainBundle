<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Custom Directory Listing</title>
  <style>
    /* General styles */
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 600px;
      margin: 20px auto;
      background: #fff;
      border-radius: 5px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 20px;
    }
    .header {
      text-align: center;
      padding-bottom: 10px;
      border-bottom: 1px solid #ddd;
    }
    .header h1 {
      margin: 0;
      font-size: 24px;
    }
    .file-list {
      list-style: none;
      padding: 0;
      margin-top: 20px;
    }
    .file-item {
      display: flex;
      align-items: center;
      padding: 10px;
      border-bottom: 1px solid #eee;
      cursor: pointer;
      transition: background 0.3s;
    }
    .file-item:hover {
      background-color: #f9f9f9;
    }
    .file-icon {
      width: 32px;
      height: 32px;
      margin-right: 15px;
    }
    .file-name {
      flex-grow: 1;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Directory Listing</h1>
    </div>
    <ul class="file-list" id="fileList">
      <!-- File items will be inserted here -->
    </ul>
  </div>

  <script>
    // This function fetches the file list from the server.
    // Your server should have an endpoint (like /api/files) that returns a JSON array.
    async function fetchFiles() {
      try {
        const response = await fetch('files.json');  // Adjust endpoint as needed.
        if (!response.ok) throw new Error("HTTP error " + response.status);
        const files = await response.json();
        return files; // Expect format like [{ name: "file1.txt", type: "file" }, { name: "folder1", type: "folder" }, ...]
      } catch (err) {
        console.error("Failed to fetch files:", err);
        return [];
      }
    }

    // Renders the file list with custom styling.
    async function renderDirectory() {
      const files = await fetchFiles();
      const fileList = document.getElementById("fileList");
      fileList.innerHTML = ""; // Clear any existing items.

      files.forEach(file => {
        const li = document.createElement("li");
        li.className = "file-item";

        // Create an icon element based on file type.
        const icon = document.createElement("img");
        icon.className = "file-icon";
        if (file.type === "folder") {
          icon.src = "/icons/folder.png"; // Path to your folder icon
        } else {
          icon.src = "/icons/file.png";   // Path to your file icon
        }
        li.appendChild(icon);

        // Create a span to hold the file name.
        const nameSpan = document.createElement("span");
        nameSpan.className = "file-name";
        nameSpan.textContent = file.name;
        li.appendChild(nameSpan);

        // Optional: add a click event (or drag & drop) to open or move the file.
        li.addEventListener("click", () => {
          // For example, you might load the file in another iframe
          // or navigate into the folder if file.type === "folder"
          console.log("Clicked file:", file.name);
        });

        fileList.appendChild(li);
      });
    }

    // Initialize the directory view when the page loads.
    renderDirectory();
  </script>
</body>
</html>
